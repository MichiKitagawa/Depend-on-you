## ä½œå“ä¸€è¦§ç”»é¢ä»•æ§˜æ›¸ï¼ˆPatternÂ AÂ â€•Â ç¸¦ãƒ•ãƒ­ãƒ¼ï¼‹ã‚¯ãƒ©ã‚¹ã‚¿ã‚¿ãƒ–ï¼‰

### 1. ç›®çš„ãƒ»å¯¾è±¡
- **ç›®çš„**Â : èª­è€…ãŒã‚¯ãƒ©ã‚¹ã‚¿ï¼ˆå—œå¥½ã‚«ãƒ†ã‚´ãƒªï¼‰ã‚’åˆ‡æ›¿ãˆãªãŒã‚‰é«˜é€Ÿã«ä½œå“ã‚’ç™ºæ˜ã—ã€å³åº§ã«ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆBoostï¼ä¿å­˜ï¼ã‚³ãƒ¡ãƒ³ãƒˆï¼å…±æœ‰ï¼‰ã‚’è¡Œãˆã‚‹ UI ã‚’æä¾›ã™ã‚‹ã€‚
- **å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼**Â : èª­è€…ï¼ˆä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰ã€‚
- **å¯¾å¿œã‚µãƒ¼ãƒ“ã‚¹**Â : feedâ€‘service, readerâ€‘actionâ€‘service, contentâ€‘service, scoreâ€‘service, rankingâ€‘service, userâ€‘service.

---

### 2. ç”»é¢æ§‹æˆï¼ˆãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Header                                                   â”‚
â”‚  â”œâ”€ Logo   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€ Cluster Tabs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€ ğŸ” â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                          â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚          â”‚     ä½œå“ã‚«ãƒ¼ãƒ‰ï¼ˆ9:16ï¼‰        â”‚   â† Swipe â†‘â†“   â”‚
â”‚          â”‚                            â”‚                 â”‚
â”‚          â”‚  â–¼ Title / Author overlay  â”‚                 â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                          â”‚
â”‚  ActionÂ Bar (vertical right)                             â”‚
â”‚   ğŸ‘  ğŸ’¾  ğŸ’¬  â†—ï¸                                         â”‚
â”‚                                                          â”‚
â”‚  ScoreÂ Meter (small leftâ€‘bottom)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â†‘  Swipe Hint             
```
- **Header**
  - *Logo*Â : åˆæœŸã‚¯ãƒ©ã‚¹ã‚¿ã€ŒALLã€ã¸ã®ãƒªã‚»ãƒƒãƒˆã€‚
  - *Cluster Tabs*Â : ALL / SF / Romance â€¦ ï¼ˆrankingâ€‘service ãŒå®šç¾©ã™ã‚‹ã‚¯ãƒ©ã‚¹ã‚¿ï¼‰ã€‚
  - *Search Icon*Â : æ¤œç´¢ç”»é¢ã¸ã®é·ç§»ã€‚
- **ä½œå“ã‚«ãƒ¼ãƒ‰**Â : feedâ€‘service ã‹ã‚‰ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã•ã‚ŒãŸ `ContentId` / `EpisodeId` å˜ä½ã®ã‚µãƒ ãƒã‚¤ãƒ«ã€‚
- **Overlay**Â : ã‚¿ã‚¤ãƒˆãƒ«ãƒ»ä½œè€…åãƒ»æœ€æ–°è©±æ•°ã€‚
- **ActionÂ Bar**Â : ğŸ‘ Boost, ğŸ’¾ Save, ğŸ’¬ Comment, â†—ï¸ Shareã€‚
- **ScoreÂ Meter**Â : scoreâ€‘service ã®ç·åˆã‚¹ã‚³ã‚¢ã‚’ 5 æ®µéšãƒãƒ¼ã§å¯è¦–ã€‚

---

### 3. UI è¦ç´  â†’ ãƒ‡ãƒ¼ã‚¿ãƒãƒƒãƒ”ãƒ³ã‚°
| UI è¦ç´  | schema.ts å‹ / ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | APIÂ Source (Service) |
|---------|---------------------------|----------------------|
| ä½œå“ã‚«ãƒ¼ãƒ‰ | `ContentId`, `EpisodeId`, `contentStatus`, thumbnailUrl | feedâ€‘service `/feeds` |
| ã‚¿ã‚¤ãƒˆãƒ« | `title: string` (content metadata) | contentâ€‘service `/contents/{id}` |
| ä½œè€…å | `author.userName`  (å†…éƒ¨ã§ `UserId` å‚ç…§) | userâ€‘serviceÂ â†’Â contentâ€‘service join |
| ActionÂ Boost | `ActionType = 'boost'` | readerâ€‘actionâ€‘service `/actions` |
| ActionÂ Save | `ActionType = 'save'` | readerâ€‘actionâ€‘service `/actions` |
| ActionÂ Comment | `ActionType = 'comment'` + `CommentPayload` | readerâ€‘actionâ€‘service |
| ã‚¹ã‚³ã‚¢å€¤ | `score: number` (0â€‘100) | scoreâ€‘service (push) |
| ã‚¯ãƒ©ã‚¹ã‚¿ Tab | `clusterId: string` | rankingâ€‘serviceÂ â†’Â feedâ€‘service |
| é€šçŸ¥ Badge | `NotificationId` | userâ€‘service `/notifications` |

---

### 4. ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ & ç”»é¢é·ç§»
| # | ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ | ãƒ•ãƒ­ãƒ³ãƒˆå‡¦ç† | APIÂ å‘¼ã³å‡ºã— | é·ç§» / æ›´æ–° |
|---|--------------|--------------|--------------|--------------|
| 1 | ã‚¯ãƒ©ã‚¹ã‚¿ã‚¿ãƒ–é¸æŠ | `selectedCluster` æ›´æ–°ã€ç¾ãƒ•ã‚£ãƒ¼ãƒ‰ç ´æ£„ | `GET /feeds?cluster={id}&limit=20` | æ–°ãƒ•ã‚£ãƒ¼ãƒ‰æç”» |
| 2 | ä½œå“ã‚«ãƒ¼ãƒ‰å˜ã‚¿ãƒƒãƒ— | è©³ç´°ç”»é¢ã¸ `router.push('/content/{ContentId}/episode/{EpisodeId}')` | `GET /contents/{id}/episodes/{eid}` | ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ€ãƒ¼ |
| 3 | ã‚¿ã‚¤ãƒˆãƒ« / ä½œè€…ã‚¿ãƒƒãƒ— | ä½œå“è©³ç´°ã¸ | `GET /contents/{id}` | ä½œå“æ¦‚è¦ + é€£è¼‰ãƒªã‚¹ãƒˆ |
| 4 | Boost ãƒœã‚¿ãƒ³ | æ¥½è¦³çš„ã‚«ã‚¦ãƒ³ãƒˆ +1 | `POST /actions (boost)` | ã‚¹ã‚³ã‚¢ push æ›´æ–° |
| 5 | ä¿å­˜ãƒœã‚¿ãƒ³ | SavedÂ state ãƒˆã‚°ãƒ« | `POST /actions (save)` | â€” |
| 6 | ã‚³ãƒ¡ãƒ³ãƒˆãƒœã‚¿ãƒ³ | ã‚³ãƒ¡ãƒ³ãƒˆã‚·ãƒ¼ãƒˆ open | `GET /comments?episodeId=` | ã‚³ãƒ¡ãƒ³ãƒˆé–²è¦§ï¼å…¥åŠ› |
| 7 | ã‚³ãƒ¡ãƒ³ãƒˆé€ä¿¡ | å³æ™‚æŒ¿å…¥ | `POST /actions (comment)` | â€” |
| 8 | å…±æœ‰ãƒœã‚¿ãƒ³ | DeepLink ä½œæˆ â†’ OS Share | â€” | å¤–éƒ¨èµ·å‹•æ™‚ã¯ `/?contentId=` ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚° |
| 9 | ç¸¦ã‚¹ãƒ¯ã‚¤ãƒ—çµ‚ç«¯ | æ¬¡ãƒãƒƒãƒãƒ—ãƒªãƒ•ã‚§ãƒƒãƒ | `GET /feeds?cursor=` | ã‚«ãƒ¼ãƒ‰è¿½åŠ  |

---

### 5. ä½¿ç”¨ API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼ˆç°¡æ˜“å®šç¾©ï¼‰
| Service | Method & Path | èª¬æ˜ | ä¸»è¦ãƒ¬ã‚¹ãƒãƒ³ã‚¹ |
|----------|---------------|------|----------------|
| feedâ€‘service | `GET /feeds?cluster&limit&cursor` | ã‚¯ãƒ©ã‚¹ã‚¿åˆ¥ãƒ•ã‚£ãƒ¼ãƒ‰å–å¾— | `[ { feedId, contentId, episodeId, score } ]` |
| contentâ€‘service | `GET /contents/{id}` | ä½œå“ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ | `{ title, authorId, status, synopsis, tags }` |
| contentâ€‘service | `GET /contents/{id}/episodes/{eid}` | ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰æœ¬æ–‡ | `{ pages: [...], nextEpisodeId? }` |
| readerâ€‘actionâ€‘service | `POST /actions` | Boost/Save/Comment é€ä¿¡ | `201 Created` |
| readerâ€‘actionâ€‘service | `GET /comments?episodeId` | ã‚³ãƒ¡ãƒ³ãƒˆä¸€è¦§ | `[ { actionId, userId, commentText, createdAt } ]` |
| scoreâ€‘service | `WS /scores/subscribe` | Boostå¾Œã®ã‚¹ã‚³ã‚¢ push | `{ contentId, newScore }` |
| userâ€‘service | `GET /notifications` | é€šçŸ¥ä¸€è¦§ | `[ { notificationId, type, data, createdAt } ]` |

---

### 6. çŠ¶æ…‹ç®¡ç† / ã‚­ãƒ£ãƒƒã‚·ãƒ¥
- **ã‚¯ãƒ©ã‚¹ã‚¿ã”ã¨ã® feed ã‚­ãƒ£ãƒƒã‚·ãƒ¥**Â : 1Â ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ 30Â è©±ä¿æŒã€‚ã‚¿ãƒ–åˆ‡æ›¿ã§æ—¢å­˜ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å†åˆ©ç”¨ã€‚
- **Boost/Save æ¥½è¦³æ›´æ–°**Â : UI æ›´æ–° â†’ API æˆ»ã‚Šã‚¨ãƒ©ãƒ¼æ™‚ã®ã¿ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ã€‚
- **ç”»åƒãƒ—ãƒªãƒ­ãƒ¼ãƒ‰**Â : æ¬¡ã‚«ãƒ¼ãƒ‰ +1 æšã¾ã§å…ˆèª­ã¿ã€‚
- **WebSocket**Â : ã‚¹ã‚³ã‚¢, ã‚³ãƒ¡ãƒ³ãƒˆè¿½åŠ , é€šçŸ¥ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åæ˜ ã€‚

---

### 7. UI ãƒ‡ã‚¶ã‚¤ãƒ³ã‚¬ã‚¤ãƒ‰
- **ã‚«ãƒ¼ãƒ‰æ¯”ç‡**Â : 9:16ï¼ˆç«¯æœ«å¹…ã‚’åŸºæº–ï¼‰
- **ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒãƒ¼**Â : 56â€¯px é«˜ãƒœã‚¿ãƒ³ãƒ»64â€¯px é–“éš”ã€‚ã‚¿ãƒƒãƒ—é ˜åŸŸ 48â€¯px ä»¥ä¸Šã€‚
- **ã‚¹ã‚³ã‚¢ãƒãƒ¼**Â : é«˜ã• 48â€¯pxã€è‰²Â gradientÂ :redâ†’greenã€æ®µéšè¡¨ç¤ºã€‚
- **ãƒ–ãƒ¼ã‚¹ãƒˆæˆåŠŸãƒˆãƒ¼ã‚¹ãƒˆ**Â : 1.5s è¡¨ç¤º â€œBoosted! +1â€.
- **å…¨ä½“ãƒ†ãƒ¼ãƒ**Â : ãƒ€ãƒ¼ã‚¯ï¼ãƒ©ã‚¤ãƒˆè‡ªå‹•åˆ‡æ›¿ã€‚

---

### 8. éæ©Ÿèƒ½ãƒ¡ãƒ¢
- åˆå›ãƒ­ãƒ¼ãƒ‰ <Â 2â€¯s / 3G å›ç·šåŸºæº–ã€‚
- ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£Â : æ–‡å­—ã‚µã‚¤ã‚ºå¤‰æ›´ã¸ã®è¿½å¾“ã€ãƒœã‚¿ãƒ³ ARIA ãƒ©ãƒ™ãƒ«ä»˜ä¸ã€‚
- ãƒ†ã‚¹ãƒˆÂ : cypressÂ E2EÂ â€” ã‚¯ãƒ©ã‚¹ã‚¿åˆ‡æ›¿ãƒ»Boost æˆåŠŸãƒ»ã‚³ãƒ¡ãƒ³ãƒˆé€ä¿¡ã€‚

---

